(()=>{"use strict";const e=[{code:"Backquote",keyEN:"`",shiftKeyEN:"~",keyRU:"ё",shiftKeyRU:"Ё",group:"alphanumeric"},{code:"Digit1",keyEN:"1",shiftKeyEN:"!",keyRU:"1",shiftKeyRU:"!",group:"alphanumeric"},{code:"Digit2",keyEN:"2",shiftKeyEN:"@",keyRU:"2",shiftKeyRU:'"',group:"alphanumeric"},{code:"Digit3",keyEN:"3",shiftKeyEN:"#",keyRU:"3",shiftKeyRU:"№",group:"alphanumeric"},{code:"Digit4",keyEN:"4",shiftKeyEN:"$",keyRU:"4",shiftKeyRU:";",group:"alphanumeric"},{code:"Digit5",keyEN:"5",shiftKeyEN:"%",keyRU:"5",shiftKeyRU:"%",group:"alphanumeric"},{code:"Digit6",keyEN:"6",shiftKeyEN:"^",keyRU:"6",shiftKeyRU:":",group:"alphanumeric"},{code:"Digit7",keyEN:"7",shiftKeyEN:"&",keyRU:"7",shiftKeyRU:"?",group:"alphanumeric"},{code:"Digit8",keyEN:"8",shiftKeyEN:"*",keyRU:"8",shiftKeyRU:"*",group:"alphanumeric"},{code:"Digit9",keyEN:"9",shiftKeyEN:"(",keyRU:"9",shiftKeyRU:"(",group:"alphanumeric"},{code:"Digit0",keyEN:"0",shiftKeyEN:")",keyRU:"0",shiftKeyRU:")",group:"alphanumeric"},{code:"Minus",keyEN:"-",shiftKeyEN:"_",keyRU:"-",shiftKeyRU:"_",group:"alphanumeric"},{code:"Equal",keyEN:"=",shiftKeyEN:"+",keyRU:"=",shiftKeyRU:"+",group:"alphanumeric"},{code:"Backspace",keyEN:"Backspace",shiftKeyEN:"Backspace",keyRU:"Backspace",shiftKeyRU:"Backspace",group:"functional"},{code:"Tab",keyEN:"Tab",shiftKeyEN:"Tab",keyRU:"Tab",shiftKeyRU:"Tab",group:"functional"},{code:"KeyQ",keyEN:"q",shiftKeyEN:"Q",keyRU:"й",shiftKeyRU:"Й",group:"alphanumeric"},{code:"KeyW",keyEN:"w",shiftKeyEN:"W",keyRU:"ц",shiftKeyRU:"Ц",group:"alphanumeric"},{code:"KeyE",keyEN:"e",shiftKeyEN:"E",keyRU:"у",shiftKeyRU:"У",group:"alphanumeric"},{code:"KeyR",keyEN:"r",shiftKeyEN:"R",keyRU:"к",shiftKeyRU:"К",group:"alphanumeric"},{code:"KeyT",keyEN:"t",shiftKeyEN:"T",keyRU:"е",shiftKeyRU:"Е",group:"alphanumeric"},{code:"KeyY",keyEN:"y",shiftKeyEN:"Y",keyRU:"н",shiftKeyRU:"Н",group:"alphanumeric"},{code:"KeyU",keyEN:"u",shiftKeyEN:"U",keyRU:"г",shiftKeyRU:"Г",group:"alphanumeric"},{code:"KeyI",keyEN:"i",shiftKeyEN:"I",keyRU:"ш",shiftKeyRU:"Ш",group:"alphanumeric"},{code:"KeyO",keyEN:"o",shiftKeyEN:"O",keyRU:"щ",shiftKeyRU:"Щ",group:"alphanumeric"},{code:"KeyP",keyEN:"p",shiftKeyEN:"P",keyRU:"з",shiftKeyRU:"З",group:"alphanumeric"},{code:"BracketLeft",keyEN:"[",shiftKeyEN:"{",keyRU:"х",shiftKeyRU:"Х",group:"alphanumeric"},{code:"BracketRight",keyEN:"]",shiftKeyEN:"}",keyRU:"ъ",shiftKeyRU:"Ъ",group:"alphanumeric"},{code:"Backslash",keyEN:"\\",shiftKeyEN:"|",keyRU:"\\",shiftKeyRU:"/",group:"alphanumeric"},{code:"Delete",keyEN:"Del",shiftKeyEN:"Del",keyRU:"Del",shiftKeyRU:"Del",group:"functional"},{code:"CapsLock",keyEN:"CapsLock",shiftKeyEN:"CapsLock",keyRU:"CapsLock",shiftKeyRU:"CapsLock",group:"functional"},{code:"KeyA",keyEN:"a",shiftKeyEN:"A",keyRU:"ф",shiftKeyRU:"Ф",group:"alphanumeric"},{code:"KeyS",keyEN:"s",shiftKeyEN:"S",keyRU:"ы",shiftKeyRU:"Ы",group:"alphanumeric"},{code:"KeyD",keyEN:"d",shiftKeyEN:"D",keyRU:"в",shiftKeyRU:"В",group:"alphanumeric"},{code:"KeyF",keyEN:"f",shiftKeyEN:"F",keyRU:"а",shiftKeyRU:"А",group:"alphanumeric"},{code:"KeyG",keyEN:"g",shiftKeyEN:"G",keyRU:"п",shiftKeyRU:"П",group:"alphanumeric"},{code:"KeyH",keyEN:"h",shiftKeyEN:"H",keyRU:"р",shiftKeyRU:"Р",group:"alphanumeric"},{code:"KeyJ",keyEN:"j",shiftKeyEN:"J",keyRU:"о",shiftKeyRU:"О",group:"alphanumeric"},{code:"KeyK",keyEN:"k",shiftKeyEN:"K",keyRU:"л",shiftKeyRU:"Л",group:"alphanumeric"},{code:"KeyL",keyEN:"l",shiftKeyEN:"L",keyRU:"д",shiftKeyRU:"Д",group:"alphanumeric"},{code:"Semicolon",keyEN:";",shiftKeyEN:":",keyRU:"ж",shiftKeyRU:"Ж",group:"alphanumeric"},{code:"Quote",keyEN:"'",shiftKeyEN:'"',keyRU:"э",shiftKeyRU:"Э",group:"alphanumeric"},{code:"Enter",keyEN:"Enter",shiftKeyEN:"Enter",keyRU:"Enter",shiftKeyRU:"Enter",group:"functional"},{code:"ShiftLeft",keyEN:"Shift",shiftKeyEN:"Shift",keyRU:"Shift",shiftKeyRU:"Shift",group:"functional"},{code:"KeyZ",keyEN:"z",shiftKeyEN:"Z",keyRU:"я",shiftKeyRU:"Я",group:"alphanumeric"},{code:"KeyX",keyEN:"x",shiftKeyEN:"X",keyRU:"ч",shiftKeyRU:"Ч",group:"alphanumeric"},{code:"KeyC",keyEN:"c",shiftKeyEN:"C",keyRU:"с",shiftKeyRU:"С",group:"alphanumeric"},{code:"KeyV",keyEN:"v",shiftKeyEN:"V",keyRU:"м",shiftKeyRU:"М",group:"alphanumeric"},{code:"KeyB",keyEN:"b",shiftKeyEN:"B",keyRU:"и",shiftKeyRU:"И",group:"alphanumeric"},{code:"KeyN",keyEN:"n",shiftKeyEN:"N",keyRU:"т",shiftKeyRU:"Т",group:"alphanumeric"},{code:"KeyM",keyEN:"m",shiftKeyEN:"M",keyRU:"ь",shiftKeyRU:"Ь",group:"alphanumeric"},{code:"Comma",keyEN:",",shiftKeyEN:"<",keyRU:"б",shiftKeyRU:"Б",group:"alphanumeric"},{code:"Period",keyEN:".",shiftKeyEN:">",keyRU:"ю",shiftKeyRU:"Ю",group:"alphanumeric"},{code:"Slash",keyEN:"/",shiftKeyEN:"?",keyRU:".",shiftKeyRU:",",group:"alphanumeric"},{code:"ArrowUp",keyEN:"▲",shiftKeyEN:"▲",keyRU:"▲",shiftKeyRU:"▲",group:"functional"},{code:"ShiftRight",keyEN:"Shift",shiftKeyEN:"Shift",keyRU:"Shift",shiftKeyRU:"Shift",group:"functional"},{code:"ControlLeft",keyEN:"Ctrl",shiftKeyEN:"Ctrl",keyRU:"Ctrl",shiftKeyRU:"Ctrl",group:"functional"},{code:"MetaLeft",keyEN:"Win",shiftKeyEN:"Win",keyRU:"Win",shiftKeyRU:"Win",group:"functional"},{code:"AltLeft",keyEN:"Alt",shiftKeyEN:"Alt",keyRU:"Alt",shiftKeyRU:"Alt",group:"functional"},{code:"Space",keyEN:" ",shiftKeyEN:" ",keyRU:" ",shiftKeyRU:" ",group:"functional"},{code:"AltRight",keyEN:"Alt",shiftKeyEN:"Alt",keyRU:"Alt",shiftKeyRU:"Alt",group:"functional"},{code:"ArrowLeft",keyEN:"◄",shiftKeyEN:"◄",keyRU:"◄",shiftKeyRU:"◄",group:"functional"},{code:"ArrowDown",keyEN:"▼",shiftKeyEN:"▼",keyRU:"▼",shiftKeyRU:"▼",group:"functional"},{code:"ArrowRight",keyEN:"►",shiftKeyEN:"►",keyRU:"►",shiftKeyRU:"►",group:"functional"},{code:"ControlRight",keyEN:"Ctrl",shiftKeyEN:"Ctrl",keyRU:"Ctrl",shiftKeyRU:"Ctrl",group:"functional"}],t={HD:"header",TX:"textarea",KB_WR:"keyboard-wrap",KB:"keyboard",KB_K:"keyboard__key",KB_KF:"keyboard__key_func",KB_KA:"keyboard__key_active",KB_CA:"keyboard__caps_active",FT:"footer",KB_C:"keyboard__caps",KB_E:"keyboard__enter",KB_SH:"keyboard__shift",KB_S:"keyboard__space"};let y=[],a=[],i=[],o=[],s=[],c=[];for(let t=0;t<e.length;t++)y.push(e[t].keyEN),i.push(e[t].keyRU),a.push(e[t].shiftKeyEN),o.push(e[t].shiftKeyRU),s.push(e[t].code),c.push(e[t].group);function r(e,t){const y=document.createElement(e);return y.classList.add(t),y}function d(e){const y=r("div",t.KB_K);return y.textContent=e,y}const h=r("div",t.HD);h.textContent="Виртуальная клавиатура",document.body.append(h);const u=r("textarea",t.TX);u.setAttribute("autofocus","true"),document.body.append(u);const n=r("section",t.KB_WR),k=r("div",t.KB);n.append(k),document.body.append(n);const f=r("div",t.FT);function K(e){for(;k.firstChild;)k.firstChild.remove();for(let y=0;y<e.length;y++){const a=d(e[y]);a.setAttribute("data-key",e[y]),a.setAttribute("data-keycode",s[y]),a.setAttribute("data-group",c[y]),"CapsLock"==a.dataset.keycode&&a.classList.add(t.KB_C),"Enter"==a.dataset.keycode&&a.classList.add(t.KB_E),"Shift"==a.dataset.key&&a.classList.add(t.KB_SH),"Space"==a.dataset.keycode&&a.classList.add(t.KB_S),"functional"==a.dataset.group&&a.classList.add(t.KB_KF),k.append(a)}}f.innerText="Клавиатура создана в операционной системе Windows.\nДля переключения языка комбинация: левые (ctrl + alt).",document.body.append(f);let l=!1,p=!1,E=!1,R=JSON.parse(localStorage.getItem("layout"));R||(localStorage.setItem("layout",JSON.stringify(y)),R=y),K(R),document.addEventListener("keydown",(e=>{"AltLeft"==e.code&&(document.addEventListener("keyup",(e=>{"ControlLeft"==e.code&&(l=!l,l&&(K(i),localStorage.setItem("layout",JSON.stringify(i))),l||(K(y),localStorage.setItem("layout",JSON.stringify(y))))})),l=!1)})),document.addEventListener("keydown",(e=>{"CapsLock"==e.code&&(document.addEventListener("keyup",(e=>{"CapsLock"==e.code&&(l?(E=!E,K(E?o:i)):(E=!E,K(E?a:y)))})),E=!1)})),document.addEventListener("keydown",(e=>{document.addEventListener("keyup",(e=>{let y=document.querySelector("[data-keycode = 'CapsLock']");e.code==y.dataset.keycode&&y.classList.add(t.KB_CA),e.code!=y.dataset.keycode||E||y.classList.remove(t.KB_CA)}))})),document.addEventListener("keydown",(e=>{("ShiftLeft"==e.code&&!l||"ShiftRight"==e.code&&!l)&&(p=!p,K(a)),("ShiftLeft"==e.code&&l||"ShiftRight"==e.code&&l)&&(p=!p,K(o))})),document.addEventListener("keyup",(e=>{("ShiftLeft"==e.code&&!l||"ShiftRight"==e.code&&!l)&&K(y),("ShiftLeft"==e.code&&l||"ShiftRight"==e.code&&l)&&K(i)})),document.addEventListener("keydown",(e=>{let y=document.querySelector(`[data-keycode='${e.code}']`);if(y){if(y.classList.add(t.KB_KA),e.key.length<2&&(u.value+=e.key),e.preventDefault(),"Backspace"===e.code)return u.value=u.value.slice(0,-1);if("Delete"===e.code)return u.value=u.value.slice(0,-1);if("Enter"===e.code)return u.value+="\n"}})),document.addEventListener("keyup",(e=>{let y=document.querySelector(`[data-keycode='${e.code}']`);y&&y.classList.remove(t.KB_KA)})),document.addEventListener("keydown",(e=>"ArrowUp"==e.code?u.value+="▲":"ArrowLeft"==e.code?u.value+="◄":"ArrowDown"==e.code?u.value+="▼":"ArrowRight"==e.code?u.value+="►":void 0)),document.addEventListener("keydown",(e=>{if("Tab"==e.code)return u.value+="    "})),k.addEventListener("click",(e=>"Backspace"===e.target.dataset.key?u.value=u.value.slice(0,-1):"Tab"===e.target.dataset.key?u.value+="    ":"Del"===e.target.dataset.key?u.value=u.value.slice(0,-1):"CapsLock"===e.target.dataset.key?l?(E=!E,void K(E?o:i)):(E=!E,void K(E?a:y)):"Enter"===e.target.dataset.key?u.value+="\n":"Ctrl"===e.target.dataset.key||"Alt"===e.target.dataset.key||"Win"===e.target.dataset.key?"":void(e.target.dataset.key&&(u.value+=e.target.dataset.key)))),k.addEventListener("mousedown",(e=>{"Shift"!=e.target.dataset.key||l||(p=!p,K(a)),"Shift"==e.target.dataset.key&&l&&(p=!p,K(o))})),k.addEventListener("mouseup",(e=>{"Shift"!=e.target.dataset.key||l||K(y),"Shift"==e.target.dataset.key&&l&&K(i)})),k.addEventListener("mousedown",(e=>{let y=document.querySelector(`[data-key='${e.target.dataset.key}']`);y&&y.classList.add(t.KB_KA)})),k.addEventListener("mouseup",(e=>{let y=document.querySelector(`[data-key='${e.target.dataset.key}']`);y&&y.classList.remove(t.KB_KA)}))})();
